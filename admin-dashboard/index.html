<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    
    <!-- Primary Meta Tags -->
    <title>بثواني - توصيل في ثوانٍ، راحة بلا حدود</title>
    <meta name="title" content="بثواني - توصيل في ثوانٍ، راحة بلا حدود" />
    <meta name="description" content="منصة توصيل رائدة في اليمن تقدم خدمات توصيل سريعة وموثوقة للمواد الغذائية والسوبرماركت وجميع احتياجاتك اليومية. اطلب الآن من صنعاء وعدن وتعز." />
    <meta name="keywords" content="توصيل سريع، توصيل طعام، سوبرماركت اونلاين، توصيل بقالة، توصيل في اليمن، توصيل صنعاء، بثواني، تطبيق توصيل" />
    <meta name="author" content="بثواني" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="googlebot" content="index, follow" />
    <meta name="language" content="Arabic" />
    <meta name="geo.region" content="YE" />
    <meta name="geo.placename" content="Yemen" />
    
    <!-- Viewport & Device -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <meta name="format-detection" content="telephone=yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="بثواني" />
    
    <!-- Theme & Colors -->
    <meta name="theme-color" content="#1976d2" />
    <meta name="msapplication-TileColor" content="#1976d2" />
    <meta name="msapplication-navbutton-color" content="#1976d2" />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bithawani.com/" />
    <meta property="og:title" content="بثواني - توصيل في ثوانٍ، راحة بلا حدود" />
    <meta property="og:description" content="منصة توصيل رائدة في اليمن تقدم خدمات توصيل سريعة وموثوقة. اطلب الآن من السوبرماركت والمطاعم والصيدليات." />
    <meta property="og:image" content="https://bithawani.com/images/og-home.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="بثواني" />
    <meta property="og:locale" content="ar_YE" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://bithawani.com/" />
    <meta name="twitter:title" content="بثواني - توصيل في ثوانٍ، راحة بلا حدود" />
    <meta name="twitter:description" content="منصة توصيل رائدة في اليمن تقدم خدمات توصيل سريعة وموثوقة" />
    <meta name="twitter:image" content="https://bithawani.com/images/twitter-card.jpg" />
    <meta name="twitter:site" content="@bithawani" />
    
    <!-- App Links -->
    <meta property="al:android:package" content="com.bithawani.delivery" />
    <meta property="al:android:url" content="bithawani://open" />
    <meta property="al:ios:app_store_id" content="1234567890" />
    <meta property="al:ios:url" content="bithawani://open" />
    
    <!-- Icons & Manifest -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#1976d2" />
    <link rel="manifest" href="/manifest.json" />

    <!-- Accessibility - Skip Link & Focus Styles -->
    <style>
      /* Prevent horizontal scroll (fixes overflow from 100vw, RTL layout, etc.) */
      html, body { overflow-x: hidden; }

      /* Skip Link – visually hidden until focus; works in RTL */
      .skip-link {
        position: fixed;
        inset-inline-start: 0;
        top: 0;
        z-index: 9999;
        padding: 12px 20px;
        background: #1976d2;
        color: white;
        text-decoration: none;
        border-radius: 0 0 4px 0;
        font-weight: 600;
        transform: translateY(-100%);
        transition: transform 0.2s;
      }
      .skip-link:focus {
        transform: translateY(0);
        outline: 3px solid #fff;
        outline-offset: 2px;
      }

      /* Focus Visible Styles */
      *:focus-visible {
        outline: 3px solid #1976d2;
        outline-offset: 2px;
      }

      /* High Contrast Mode Support */
      @media (prefers-contrast: high) {
        *:focus-visible {
          outline: 4px solid #000;
        }
      }

      /* Reduced Motion Support */
      @media (prefers-reduced-motion: reduce) {
        .skip-link { transition: none; }
      }
    </style>

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://api.bithawani.com" />
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet" />
    
    <!-- Canonical -->
    <link rel="canonical" href="https://bithawani.com/" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "بثواني",
      "alternateName": "Bithawani",
      "url": "https://bithawani.com",
      "logo": "https://bithawani.com/images/logo.png",
      "description": "منصة توصيل رائدة في اليمن تقدم خدمات توصيل سريعة وموثوقة",
      "foundingDate": "2024",
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+967 1 234 5678",
        "contactType": "customer service",
        "areaServed": "YE",
        "availableLanguage": ["ar", "en"]
      },
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "صنعاء، الجمهورية اليمنية",
        "addressCountry": "YE"
      },
      "sameAs": [
        "https://facebook.com/bithawani",
        "https://instagram.com/bithawani",
        "https://twitter.com/bithawani"
      ]
    }
    </script>
  </head>
  <body dir="rtl">
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
              height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Performance Monitoring -->
    <script>
      // Safety shim for React.Children - prevents "Cannot set properties of undefined"
      if (typeof window !== 'undefined') {
        window.__REACT_DEV_GLOBAL_HOOK__ = window.__REACT_DEV_GLOBAL_HOOK__ || {};
        if (!window.__REACT_DEV_GLOBAL_HOOK__.Children) {
          Object.defineProperty(window.__REACT_DEV_GLOBAL_HOOK__, 'Children', {
            get: function() {
              return {
                map: function(children, fn) { return Array.isArray(children) ? children.map(fn) : fn(children); },
                forEach: function(children, fn) { Array.isArray(children) ? children.forEach(fn) : fn(children); },
                count: function(children) { return Array.isArray(children) ? children.length : 0; },
                toArray: function(children) { return Array.isArray(children) ? children : [children]; },
                only: function(children) { if (Array.isArray(children) || children === undefined) throw new Error('Children.only() expects only one child.'); return children; },
              };
            },
            configurable: true,
            writable: true
          });
        }
      }

      // Safety wrapper for onclick assignments - prevents "Cannot set properties of null"
      const originalDefineProperty = Object.defineProperty;
      Object.defineProperty = function(obj, prop, descriptor) {
        if (prop === 'onclick' && descriptor && descriptor.value === null && obj === null) {
          console.warn('Attempted to set onclick on null element - ignoring');
          return;
        }
        return originalDefineProperty.apply(this, arguments);
      };

      // Critical Resource Hints - DISABLED SERVICE WORKER IN DEV
      if ('serviceWorker' in navigator) {
        // لا تسجل SW في التطوير
        const isProd = location.hostname !== 'localhost' && location.hostname !== '127.0.0.1';
        if (isProd) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js');
          });
        } else {
          // لو فيه SW قديم، لغِ تسجيله
          navigator.serviceWorker.getRegistrations && navigator.serviceWorker.getRegistrations().then(regs => regs.forEach(r => r.unregister()));
          caches && caches.keys().then(keys => keys.forEach(k => caches.delete(k)));
        }
      }

      // Performance Monitoring
      window.addEventListener('load', () => {
        if ('performance' in window) {
          setTimeout(() => {
            const perfData = performance.getEntriesByType('navigation')[0];
            console.log('Page Load Time:', perfData.loadEventEnd - perfData.fetchStart, 'ms');
          }, 0);
        }
      });
    </script>
  </body>
</html>
